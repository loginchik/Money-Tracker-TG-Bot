Бот для учета доходов и расходов.

<b>ВДОХНОВЕНИЕ</b>

Когда я начала зарабатывать и тратить свои деньги, я столкнулась с проблемой учёта расходов. Я пробовала разные способы, начиная с Google Sheet и заканчивая специальными приложениями. Каждый раз я сталкивалась с одной и той же проблемой: мне было слишком лень тратить несколько минут на открытие таблицы или приложения, чтобы ввести данные. Google Sheet неудобно редактировать с мобильной версии, у приложений есть ограничения. Наконец, я решила перейти в Телеграм - приложение, которым я пользовалась больше всего. Так родилась идея.

Я начала с простейшего бота, который мог только записывать новые данные в базу. Затем я решила добавить пределы расходов, чтобы иметь возможность следить за некоторыми категориями, на которые я не хотела бы спускать слишком много денег. После этого я поняла, что не проблема давать простейшую аналитику прямо в боте. Также я решила сделать базовый механизм для учёта доходов. Так идея развивалась.

<b>КАК ЭТО РАБОТАЕТ</b>

<b>Хранение данных</b>
Все данные хранятся в базе PostgreSQL с расширением PostGIS. Категории, подкатегории и периоды пределов расходов постоянные и одинаковые для всех пользователей, тогда как расходы, доходы и пределы расходов хранятся отдельно. Бот основан на модулях aiogram.

<b>Пользовательские данные и приватность</b>
Когда пользователь хочет впервые добавить что-либо с помощью команды /add, бот предлагает создать аккаунт. Это значит, что бот не хранит пользовательские данные до тех пор, пока не получит пользовательское согласие. До создания аккаунт бот общается с пользователем на русском или английском языке в зависимости от настроек Телеграма; после создания аккаунта - на том языке, который задан пользователем (русском или английском, другие пока не поддерживаются).

После создания аккаунта пользователь может добавлять расходы, доходы и пределы расходов (/add), получать статистику (/stats) и экспортировать все созданные им расходы и доходы (/export_my_data). Если нужно, есть возможность удалить все связанные с пользователем данные из базы с помощью команды (/delete_my_data). После удаления данных бот общается на русском или английском языке в зависимости от настроек Телеграма (Telegram API).

<b>Расходы</b>
Расходы связываются с постоянными подкатегориями расходов. Подкатегория расходов связывается с категорией расходов. Расходы добавляются с помощью команды /add после регистрации. У каждого расхода есть отметка о дате и времени (когда он был совершён, а не добавлен), сумма денег, связанная подкатегория и геопозиция (опционально).

<b>Доходы</b>
Доходы не связываются с другими данными. Доходы могут быть активными или пассивными, у них есть отметка о дате и сумме.

<b>Пределы расходов</b>
Пределы расходов не ограничивают возможность пользователя добавлять новые расходы. У предела есть заголовок (уникальный в рамках одного пользователя), периодичность повторения (в днях), сумма ограничения, дата начала текущего периода и дата конца, дата выхода из срока годности, связанные подкатегории и кумулятивный статус. Один предел может быть связан с максимум 5 подкатегориями. Когда создаётся предел с датой начала периода, меньшей текущей даты, баланс лимита уменьшается на сумму уже совершённых связанных расходов. Пользователи могут удалять пределы с помощью команды /delete_expense_limit.

После создания предел расходов управляется автоматически. Когда создаётся новый расход, связанные с той же категорией и актуальные на момент совершения расхода пределы изменяют свой баланс. Когда у предела заканчивается текущий период, баланс обновляется автоматически на следующий день (в полночь по Москве). Когда предел выходит из срока годности, он удаляется автоматически.